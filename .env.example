# FortFail Environment Configuration
# Copy this file to .env and configure for your environment

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# JWT Secret (REQUIRED - change from default!)
ORCH_JWT_SECRET=change-me-to-strong-random-secret

# Registration Secret (REQUIRED - change from default!)
ORCH_REG_SECRET=change-me-to-strong-random-secret

# Agent Registration Secret (should match ORCH_REG_SECRET)
AGENT_REG_SECRET=change-me-to-strong-random-secret

# ============================================================================
# SECRETS MANAGEMENT
# ============================================================================

# Secrets Backend: env (default) | aws | vault
SECRETS_BACKEND=env

# AWS Secrets Manager (if SECRETS_BACKEND=aws)
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key

# HashiCorp Vault (if SECRETS_BACKEND=vault)
# VAULT_ADDR=https://vault.example.com:8200
# VAULT_TOKEN=your-vault-token
# VAULT_ROLE=fortfail-orchestrator
# VAULT_MOUNT_POINT=secret

# ============================================================================
# TLS/HTTPS CONFIGURATION
# ============================================================================

# Enable TLS (production: true)
TLS_ENABLED=false

# TLS Certificate Files (required if TLS_ENABLED=true)
# TLS_CERT_FILE=/etc/fortfail/certs/server.crt
# TLS_KEY_FILE=/etc/fortfail/certs/server.key
# TLS_CA_FILE=/etc/fortfail/certs/ca.crt

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# Allowed Origins (production: specify domains, comma-separated)
# Examples:
#   Development: *
#   Production: https://dashboard.example.com,https://api.example.com
CORS_ALLOWED_ORIGINS=*

# ============================================================================
# RATE LIMITING
# ============================================================================

# Enable rate limiting
RATE_LIMIT_ENABLED=true

# Requests per minute per IP
RATE_LIMIT_PER_MINUTE=60

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL Connection String
# Format: postgresql://user:password@host:port/database
# Development:
DATABASE_URL=postgresql://fortfail:fortfail-dev-password@postgres:5432/fortfail
# Production example:
# DATABASE_URL=postgresql://fortfail:${DB_PASSWORD}@db.example.com:5432/fortfail

# ============================================================================
# OBJECT STORAGE (S3/MinIO)
# ============================================================================

# S3/MinIO Endpoint
# Local MinIO: http://minio:9000
# AWS S3: https://s3.amazonaws.com
S3_ENDPOINT=http://minio:9000

# S3 Credentials
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin

# S3 Bucket Name
S3_BUCKET=fortfail-snapshots

# S3 Region (for AWS S3)
# AWS_REGION=us-east-1

# ============================================================================
# ORCHESTRATOR CONFIGURATION
# ============================================================================

# Orchestrator URL (for agents)
ORCHESTRATOR_URL=http://orchestrator:8000

# Write-Ahead Log Path
WAL_PATH=/data/orchestrator_wal.log

# ============================================================================
# AGENT CONFIGURATION
# ============================================================================

# Unique Agent ID (auto-generated if not set)
# AGENT_ID=agent-001

# Command Poll Interval (seconds)
POLL_INTERVAL=10

# Backup Directory
BACKUP_DIR=/backups

# Restore Directory
RESTORE_DIR=/restore

# Pre-provisioned JWT Token (optional - agent will bootstrap if not set)
# ORCH_JWT=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ============================================================================
# MONITORING & LOGGING
# ============================================================================

# Log Level: DEBUG | INFO | WARNING | ERROR
LOG_LEVEL=INFO

# Enable Structured Logging (JSON format)
STRUCTURED_LOGGING=false

# Prometheus Metrics Endpoint
# PROMETHEUS_ENABLED=true
# PROMETHEUS_PORT=9090

# ============================================================================
# PRODUCTION SCALING
# ============================================================================

# Database Read Replicas (comma-separated)
# DATABASE_REPLICA_URLS=postgresql://fortfail:pass@replica1:5432/fortfail,postgresql://fortfail:pass@replica2:5432/fortfail

# Redis for distributed rate limiting and caching
# REDIS_URL=redis://redis:6379/0

# Session Affinity Secret (for load balancer sticky sessions)
# SESSION_SECRET=another-strong-random-secret

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable snapshot encryption at rest
# SNAPSHOT_ENCRYPTION_ENABLED=false

# Enable audit logging
# AUDIT_LOGGING_ENABLED=true

# Snapshot retention period (days)
# SNAPSHOT_RETENTION_DAYS=30
